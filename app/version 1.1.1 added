<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1062000189675219" crossorigin="anonymous"></script>
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
        />
        <link
            rel="stylesheet"
            href="style.css"
        />
        <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
        
        <meta name="msapplication-TileImage" content="../imgs/logo.png" />
        <link rel="icon" href="imgs/logo.png" sizes="32x32" />
    
        <!-- desc -->
        <meta property="og:title" content="Le Ciskolateur Web App" />
        <meta property="og:description"
            content="D√©couvre 'Le Ciskolateur', l'appli ultime pour des conversions üí± faciles entre le Cedi ghan√©en et le Franc CFA. Ne te trompe plus dans tes conversions ! √âconomise du temps et de l'argentü§©. Le taux de change est fourni et r√©guli√®rement mis √† jour." />
        <meta property="og:type" content="article" />
        <meta property="og:url" content="https://Ibrahim-Aboubacar.github.io/le-ciskolateur-infos/app/" />
    
        <meta property="og:image" content="https://ibrahim-aboubacar.github.io/le-ciskolateur-infos/imgs/screen.jpg" />
        <meta property="og:image:width" content="1028" />
        <meta property="og:image:height" content="1080" />
        <meta property="og:image:alt" content="Logo Le Ciskolateur" />
        <!-- desc -->
        <style>
            #start{
                appearance: none;
                -moz-appearance: textfield;
            }
        </style>
        <style>
            html, body {
                touch-action: manipulation;
                /* La propri√©t√© touch-action indique au navigateur comment g√©rer les gestes tactiles, y compris le zoom. "manipulation" d√©sactive le zoom. */
                user-scalable: no; /* Cette propri√©t√© peut √©galement √™tre utilis√©e pour d√©sactiver le zoom sur certains √©l√©ments sp√©cifiques si n√©cessaire. */
            }
        </style>
        <title>Le Ciskolateur</title>
    </head>

    <body x-data="{
            showInfos: false,
            internetProblem: true,
            showRate: true, // make true after developement done
            maj_disponible: false,
            showMaj_disponible: true,
            maj_disponible_version: '',
            chargement: true,
            chargementRefresh: false,
            showCommands: false,
            setting_url: 'raw.githubusercontent.com/Ibrahim-Aboubacar/le-ciskolateur-infos/main/latest/settings.js',
            //setting_url: 'ibrahim-aboubacar.github.io/le-ciskolateur-infos/settings.js',
            userActivityServer: 'https:/'+'/ciskolateur.000webhostapp.com/user-activity.php',
            //userActivityServer: 'http:/'+'/127.0.0.1/le-ciskolateur/user-activity.php',
            homePage_url: 'https:'+'/'+'/bit.ly/le-ciskolateur',
            messageInvitation: '',
            data : {
                start: 0,
                startShow: '0',
                rate: 0,
                darkMode: true,
                rate_updated_at: '',
                result: 0,
                current : {left: 'CFA', right: 'GHS'},
                original : {left: 'CFA', right: 'GHS'},
                appInfos : {
                    version : '1.1.1',
                    uuid : '',
                    release_date: '19/07/2024',
                    description: '1.1.1/description.md'
                },
                updateTheme: function (){
                    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                        document.documentElement.classList.add('dark')
                        $data.data.darkMode = true;
                    } else {
                        document.documentElement.classList.remove('dark')
                        $data.data.darkMode = false;
                    }
                },
                toogleTheme:function(){
                    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                        $data.data.setTheme('light')
                    } else {
                        $data.data.setTheme('dark')
                    }
                },
                setTheme : function (theme){
                    if(theme == 'light'){
                        // Whenever the user explicitly chooses light mode
                        localStorage.theme = 'light'
                        $data.data.darkMode = false;
                    } else {
                        // Whenever the user explicitly chooses dark mode
                        localStorage.theme = 'dark'
                        $data.data.darkMode = true;
                    }
                    $data.data.updateTheme();
                },
                incrementRate : function (){
                    $data.data.rate++
                    $data.data.update()
                    $data.vibrateSm();
                },
                decrementRate : function (){
                    $data.data.rate--;
                    $data.data.update()
                    $data.vibrateSm();
                },
                add : function (num){
                    if(num == '.' && ($data.data.start + '').includes('.')){
                        return
                    }
                    $data.vibrateSm();
                    if(num == '.'){
                        if($data.data.start+'' == '0') {
                            $data.data.start = $data.data.start + '' + num;
                            $data.data.updateStartShow()
                            return
                        }
                    }
                    $data.data.start = $data.data.start + '' + num;
                    $data.data.updateStartShow()
                    if((num == '00' || num == '0') && ($data.data.start + '').includes('0.0')){
                        //return 
                    } else {
                        if($data.data.start * 1 == 0) $data.data.start = 0;
                    }
                    if($data.data.start * 1 !== 0) {
                        if(($data.data.start + '').includes('.')){
                            return
                        }
                        if(($data.data.start+'')[0] == '0') $data.data.start = $data.data.start * 1
                    }
                    if(($data.data.start + '').includes('e') || ($data.data.start + '').includes('nity')){
                        console.log($data.data.start);
                        $data.data.start = 0;
                        return
                    }
                    $data.data.updateStartShow()
                },
                updateStartShow : function () {
                    console.log($data.data.start + '')
                    if(($data.data.start + '').includes('.')){
                        //let expression = ($data.data.start + '')[($data.data.start + '').length]
                        if(($data.data.start + '')[($data.data.start + '').length -1] == '.'){
                            //$data.data.startShow = (new Intl.NumberFormat('fr-FR').format(($data.data.start + '').slice(0, -1)) )+',';
                            $data.data.startShowToFr()
                            return
                        } else if(($data.data.start + '')[($data.data.start + '').length -1] != '.'){
                            $data.data.startShowToFr()
                            return
                        }
                        $data.data.startShow = ($data.data.start+'').replace('.', ',')
                    } else {
                        $data.data.startShow = (new Intl.NumberFormat('fr-FR').format($data.data.start) );
                    }
                },
                startShowToFr : function(){
                    $data.data.startShow = (new Intl.NumberFormat('fr-FR').format(($data.data.start*1).toFixed(9)) );
                    let nbr = ($data.data.start+'').split('.')
                    if(nbr.length === 2){
                        result = (new Intl.NumberFormat('fr-FR').format(nbr[0]) )+','
                        if(nbr[1] != ''){
                            let decimal = (new Intl.NumberFormat('fr-FR').format(nbr[1]) );
                            while(decimal.length < nbr[1].length){
                                decimal = '0'+ decimal
                            }
                            result+= decimal
                        }
                    } else {
                        result = nbr[0].toLocaleString('fr-FR')
                    }
                    console.log(nbr)
                    console.log(result)
                    $data.data.startShow = result;
                },
                effacer : function (){
                    $data.data.start = ($data.data.start + '').slice(0, -1);
                    if($data.data.start+'' == '') $data.data.start = 0;
                    $data.data.updateStartShow();
                    $data.vibrateSm();
                },
                clear : function (){
                    $data.data.start = 0;
                    $data.data.update();
                    $data.data.updateStartShow()
                    $data.vibrateSm();
                },
                update : function () {
                    let resulto = $data.data.result
                    if($data.data.start * 1 == 0) $data.data.start = 0
                    if($data.data.start * 1 !== 0) $data.data.start = $data.data.start * 1
                    if($data.data.current.left == $data.data.original.left){
                        $data.data.cfaToCedi()
                    } else if($data.data.current.left == $data.data.original.right) {
                        $data.data.cediToCfa()
                    }
                    resulto != $data.data.result ? $data.vibrateMd() : $data.vibrateSm();
                    if(($data.data.start + '').includes('e') || ($data.data.start + '').includes('nity')){
                        console.log($data.data.start);
                        $data.data.start = 0;
                        return
                    }
                },
                cfaToCedi : function () {
                    if(this.start * (this.rate / 10000) == NaN){
                        this.result = 0;
                    } else {
                        this.result = this.start * (this.rate / 10000);
                    }
                },
                cediToCfa: function () {
                    if(this.start / (this.rate / 10000) == NaN){
                        this.result = 0;
                    } else {
                        this.result = this.start / (this.rate / 10000);
                    }
                }
            },
            miseAJourNotif : function (){
                // V√©rifie si le navigateur prend en charge l'API de notification
                if ('Notification' in window) {
                    // Demande la permission d'afficher des notifications
                    Notification.requestPermission()
                        .then(permission => {
                            if (permission === 'granted') {
                                // Cr√©e une nouvelle notification
                                const notification = new Notification('Nouvelle mise √† jour disponible '+$data.maj_disponible_version, {
                                    body: 'Mettez votre application √† jour pour profiter des derni√®res fonctionnalit√©s et corrections de bugs',
                                    icon: 'https:/'+'/ibrahim-aboubacar.github.io/le-ciskolateur-infos/imgs/logo.png' // Facultatif : ajoutez une ic√¥ne √† la notification
                                });

                                // G√®re les √©v√©nements li√©s √† la notification
                                notification.onclick = function () {
                                    // Code √† ex√©cuter lorsque la notification est cliqu√©e
                                    $data.openExternalLink($data.homePage_url)
                                };

                                notification.onclose = function () {
                                    // Code √† ex√©cuter lorsque la notification est ferm√©e
                                };
                            } else {
                                // L'utilisateur a refus√© la permission
                                console.log('L\'utilisateur a refus√© la permission de notifications.');
                            }
                        })
                        .catch(error => {
                            console.error('Erreur lors de la demande de permission de notifications:', error);
                        });
                } else {
                    console.log('L\'API de notification n\'est pas prise en charge par ce navigateur.');
                }

            },
            openExternalLink : function (link) {
                try {
                    Website2APK.openExternal(link);
                    //var devId = Website2APK.getUniqueDeviceID();
                    //alert(devId);
                } catch {
                    let a = document.createElement('a')
                    a.href = link
                    a.target = '_blanck';
                    document.body.append(a)
                    a.click()
                    a.remove()
                }
            },
            checkUser:function(){
                if(!$data.getUniqueDeviceID()){
                    let uuid = $data.createUniqueDeviceID()
                    $data.setUniqueDeviceID(uuid)
                }
                $data.fetch();
            },
            objectToQueryString:function (obj) {
                const keyValuePairs = [];
                for (const key in obj) {
                    if (obj.hasOwnProperty(key)) {
                        const value = obj[key];
                        keyValuePairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));
                    }
                }
                return '?' + keyValuePairs.join('&');
            },
            fetch: function(){
                let info = $data.getDeviseInfo()
                const options = {
                    method: 'post',
                    body: JSON.stringify(info), // Convertit l'objet JavaScript en JSON
                };
                    fetch($data.userActivityServer, options)
                    .then(response => {
                        if (!response.ok) {
                            return response;
                            throw new Error(`Erreur HTTP! Statut: ${response.status}`);
                        } //console.log(response);
                        //return response.text(); // Si vous attendez une r√©ponse JSON
                        return response.json(); // Si vous attendez une r√©ponse JSON
                    })
                    .then(data => {
                        $data.setUniqueDeviceID(data.uuid)
                        $data.data.appInfos.uuid = data.uuid;
                    })
                    .catch(error => {
                        console.error('Erreur lors de la requ√™te :>', error);
                    });
            },
            createUniqueDeviceID:function(){
                return Math.random().toString(36).substr(2, 9);
            },
            getUniqueDeviceID:function(){
                let uuid = localStorage.getItem('uniqueDeviceID')
                if(uuid == null || uuid == 'undefined') return false
                return uuid;
            },
            setUniqueDeviceID:function(value){
                localStorage.setItem('uniqueDeviceID', value);
            },
            getDeviseInfo: function(){
                let info = {};
                info.uuid = $data.getUniqueDeviceID()
                info.userAgent = navigator.userAgent;
                info.appName = navigator.appName;
                info.appVersion = navigator.appVersion;
                info.platform = navigator.platform;
                info.platform = navigator.platform;
                info.ciskolateurVersion = $data.data.appInfos.version
                return info
            },
            init: function () {
                document.addEventListener('alpine:initialized', function () {
                    $data.checkUser()
                    $data.data.updateTheme();
                    $data.messageInvitation = $data.encodeWhatsappMessage('D√©couvre *\'Le Ciskolateur*\',\n \n l\'appli ultime pour des conversions üí± faciles entre le *Cedi ghan√©en* et le *Franc CFA*.\n \nNe te trompe plus dans tes conversions ! \n√âconomise du temps et de l\'argentü§©. \nLe taux de change est *fourni* et *r√©guli√®rement mis √† jour*.\n T√©l√©charge-la ici : üëáüëá\n => *'+ $data.homePage_url +'* et rejoins-nous maintenant üëå!')
                    $data.gobalInit();
                })
            },
            vibrateSm : function (){
                if ('vibrate' in navigator) {
                    // Vibrate for 1000 milliseconds (1 second)
                    navigator.vibrate(60);
                } else {
                    // Vibration API is not supported
                    console.log('Vibration API is not supported in this browser.');
                }
            },
            vibrateMd : function (){
                if ('vibrate' in navigator) {
                    // Vibrate for 1000 milliseconds (1 second)
                    navigator.vibrate(100);
                } else {
                    // Vibration API is not supported
                    console.log('Vibration API is not supported in this browser.');
                }
            },
            encodeWhatsappMessage: function (mess){
                return (mess.replace(/\n/g, '%0A')).replace(/ /g, '%20')
            },
            checkMaj : function (){
                //console.log('Recherche de mise √† jour...')
                if($data.getSettings().app_update.current_version != $data.data.appInfos.version){
                    //$data.maj_disponible = true;
                    console.log('Mise √† jour disponible v'+$data.getSettings().app_update.current_version+' ‚Ä¶')
                    $data.miseAJourNotif()
                }
            },
            reinitialiserTaux: function (){
                $data.vibrateSm();
                $data.showCommands = false;
                if($data.getSettings()){
                    $data.data.rate = $data.getSettings().rate.value;
                    $data.data.rate_updated_at = $data.getSettings().rate.updated_at;
                    $data.data.update()
                }
            },
            charge : function (){
                $data.chargement = false;
            },
            gobalInit: function (){
                $data.chargement = true;
                $data.chargementRefresh = false;
                if($data.getSettings()){
                    $data.maj_disponible = $data.getSettings().app_update.current_version != $data.data.appInfos.version;
                    $data.maj_disponible_version = $data.getSettings().app_update.current_version;
                    $data.data.rate = $data.getSettings().rate.value;
                    $data.data.rate_updated_at = $data.getSettings().rate.updated_at;
                }
                $data.showRate = true;
                $data.fetchAndSetData();
            },
            fetchAndSetData: function (){
                let timestamp = new Date().getTime();
                fetch('https:'+'/'+'/'+$data.setting_url+'?timestamp='+timestamp)
                .then(response => {
                    if (!response.ok) {
                        $data.internetProblem = true;
                        setTimeout(()=>{
                            $data.internetProblem = false;
                            alert('ici')
                            $data.charge();
                        }, 3000);
                        throw new Error('Le fichier de configuratoin n\'a pas pu √™tre r√©cup√©r√©.');
                    }
                return response.json();
                }).then((settings)=>{
                    $data.data.rate = settings.rate.value;
                    $data.setSettings(settings);
                    setTimeout(()=>{
                        $data.charge();
                        $data.internetProblem = false;

                        $data.data.update();
                        $data.chargementRefresh = true;
                        $data.vibrateSm();
                        setTimeout(()=>{
                            $data.chargementRefresh = false;
                        }, 2500);
                        setTimeout(()=>{
                            $data.checkMaj(); 
                        },2000);
                    }, randomNumberInRange = 400 + Math.floor(Math.random() * (1500 - 400 + 1)));
                }).catch((rej)=>{
                    console.error('rej: '+rej)
                    $data.charge();
                    $data.internetProblem = true;
                        setTimeout(()=>{
                            $data.internetProblem = false;
                            $data.charge();
                        }, 3000);
                })
            },
            setSettings: function (set){
                $data.data.rate = set.rate.value
                $data.data.rate_updated_at = set.rate.updated_at
                localStorage.setItem('settings', JSON.stringify(set))
                return true;
            },
            getSettings: function (){
                settings = localStorage.getItem('settings')
                if(settings){
                    return JSON.parse(settings);
                } else {
                    // userActivityServer:'https://slim-app.test/user-activity.php',
                    return {
                        rate: {
                            value:245,
                            updated_at:'16 Septembre 2001 √† 00:00:00',
                            rateCountStart:100,
                            userActivityServer:'https:/'+'/ciskolateur.000webhostapp.com/user-activity.php',
                            agentNumber:'+233265361406'
                        },
                        app_update: {
                            current_version:'1.1.1',
                            updated_at:'19/07/2024',
                            desc:'/1.1.1/description.md'
                        }
                    };

                }
            },
            getAppSettings: function (){
                return $data.appInfos;
            },
            swapCurency: function(){
                if(this.data.current.left == this.data.original.right){
                    this.data.current.left = this.data.original.left
                    this.data.current.right = this.data.original.right
                } else {
                    this.data.current.left = this.data.original.right
                    this.data.current.right = this.data.original.left
                };
                //this.data.start = this.data.result
                $data.data.update();
            },
            swap : function(){
                const lC = document.getElementById('leftCurrency'); 
                const rC = document.getElementById('rightCurrency');
                const numPadSwap = document.getElementById('numPadSwap');
                numPadSwap.classList.toggle('rotate-180')
                $data.vibrateSm();
                setTimeout(()=>{
                    this.swapCurency()
                },140)
                lC.addEventListener('transitionend', (e)=>{
                    // on retire l'event
                    removeEventListener('transitionend',lC);
                    // on remet les classe initiales pour le leftCurency
                    lC.classList.remove('-translate-x-8');
                    lC.classList.add('-translate-x-32');
                    // on remet les classe initiales pour le rightCurency
                    rC.classList.remove('translate-x-8');
                    rC.classList.add('translate-x-32');
                })
                lC.classList.remove('-translate-x-32');
                lC.classList.add('-translate-x-8');
                rC.classList.remove('translate-x-32');
                rC.classList.add('translate-x-8');
            }
        }" class="select-none bg-gray-300 text-gray-800 dark:bg-gray-900 dark:text-gray-100">
    <div class="relative mx-auto max-w-3xl bg-gray-400 bg-opacity-40 py-4 text-center dark:bg-gray-800">
        <div x-show="internetProblem" style="display: none"
            class="absolute inset-0 flex items-center justify-center bg-red-600 font-bold">
            PROBLEME DE CONNECTION
        </div>
        <div x-show="chargement" class="absolute inset-0 flex items-center justify-center bg-orange-600 font-bold">
            CHARGEMENT...
        </div>
        <h1 class="font-bold">Le Ciskolateur</h1>
        <div class="absolute right-16 top-1/2 -translate-y-1/2 cursor-pointer select-none p-2"
            x-on:click="showRate = true" title="Current Rate">
            <svg class="inline-block_ h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M14.25 7.756a4.5 4.5 0 100 8.488M7.5 10.5h5.25m-5.25 3h5.25M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        </div>
        <div class="absolute right-6 top-1/2 -translate-y-1/2 cursor-pointer select-none p-2"
            x-on:click="showInfos = true" title="infos">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="h-6 w-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
            </svg>
        </div>
        <div x-show="maj_disponible && showMaj_disponible"
            class="absolute right-6 top-full inline-block -translate-y-1/3 bg-green-500 px-2 py-1 text-xs text-white"
            style="display: none" x-on:click="showMaj_disponible = false" x-transition x-transition.duration.500ms>
            <span class="bg-green-500_ h-2_ w-3_ absolute bottom-full right-4 inline-block" style="
                        border-right: 6px solid transparent;
                        border-bottom: 6px solid
                            rgb(34 197 94 / var(--tw-bg-opacity));
                        border-left: 6px solid transparent;
                    "></span>
            Nouvelle mise √† jour disponible (version
            <span x-text="$data.maj_disponible_version" class="font-bold"></span>)
        </div>
    </div>
    <div id="swith" class="group_ relative mx-auto flex max-w-3xl items-center justify-center py-4">
        <div x-on:click="swap"
            class="absolute_ -translate-x-1/2_ left-1/2 flex select-none items-center justify-center rounded-full bg-orange-600 p-4 text-white"
            type="button" title="basculer la conversion" id="swither">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="h-6 w-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5" />
            </svg>
        </div>
        <div id="leftCurrency"
            class="absolute left-1/2 top-1/2 -z-10 inline -translate-x-32 -translate-y-1/2 rounded-md bg-gray-200 px-4 py-2 font-bold shadow-md transition-all group-hover:-translate-x-8 dark:bg-gray-700"
            x-text="data.current.left">
            ...
        </div>
        <div id="rightCurrency"
            class="absolute right-1/2 top-1/2 -z-10 inline -translate-y-1/2 translate-x-32 rounded-md bg-gray-200 px-4 py-2 font-bold shadow-md transition-all group-hover:translate-x-8 dark:bg-gray-700"
            x-text="data.current.right">
            ...
        </div>
    </div>
    <!-- </div> -->
    <div class="px-6">
        <div
            class="relative mx-auto mt-3 max-w-3xl rounded-md bg-gray-200 px-5 pb-3 pt-4 text-right text-4xl dark:bg-gray-800">
            <p id="result" class="overflow-y-visible overflow-x-scroll py-1"
                x-text="(new Intl.NumberFormat('fr-FR').format(data.result.toFixed(2) ) )">
                0
            </p>
            <p id="full_result" class="text-xs" x-text="(new Intl.NumberFormat('fr-FR').format(data.result))">
                0
            </p>
            <p class="absolute left-1 top-full mt-1 text-sm text-gray-700 dark:text-gray-300">
                <span>Taux actuellement utilis√© : </span><span class="font-bold" x-text="data.rate"></span>
            </p>
            <span
                class="absolute right-2 top-0 -translate-y-1/2 rounded-md border-4 border-gray-300 bg-green-500 px-2 py-1 text-sm font-bold text-white transition-all dark:border-gray-900 dark:bg-green-800"
                id="to_currency" x-text="data.current.right" x-on:click="$data.data.clear()">GHS</span>
        </div>
    </div>
    <div class="mt-8 px-5">
        <div
            class="relative mx-auto my-3 max-w-3xl rounded-md bg-gray-200 px-5 pb-3 pt-4 text-right text-2xl dark:bg-gray-800">
            <label for="start" class="hidden">Input number</label>
            <p class="ml-6 overflow-y-visible overflow-x-scroll bg-transparent text-right">
                <span x-text="data.startShow"></span>
            </p>
            <span
                class="absolute -left-2 top-1/2 -translate-y-1/2 rounded-md border-4 border-gray-300 bg-green-500 px-2 py-1 text-sm font-bold text-white transition-all dark:border-gray-900 dark:bg-green-800"
                id="from_currency" x-text="data.current.left" x-on:click="$data.data.clear()">CFA</span>
            <p class="absolute left-1 top-full mt-1 text-sm text-gray-700 dark:text-gray-300">
                <span>Veuillez entrer le montant en : </span><span class="font-bold" x-text="data.current.left"></span>
            </p>
        </div>
    </div>
    <section id="numPad" class="mt-5 p-5">
        <div class="mx-auto grid max-w-3xl grid-cols-4 grid-rows-5 gap-2">
            <div class="numCellControl" x-on:click="$data.data.clear()">
                C
            </div>
            <div class="numCellControl" x-on:click="swap">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="h-8 w-8 transition-all" id="numPadSwap">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5" />
                </svg>
            </div>
            <div class="flex-center numCell" x-on:click="$data.data.add('7')">7</div>
            <div class="flex-center numCell" x-on:click="$data.data.add('8')">8</div>
            <div class="flex-center numCell" x-on:click="$data.data.add('9')">9</div>
            <div class="flex-center numCell row-span-2" x-on:click="$data.data.effacer()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor" class="h-9 w-9">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z" />
                </svg>
            </div>
            <div class="flex-center numCell" x-on:click="$data.data.add('4')">4</div>
            <div class="flex-center numCell" x-on:click="$data.data.add('5')">5</div>
            <div class="flex-center numCell" x-on:click="$data.data.add('6')">6</div>
            <div class="flex-center numCell" x-on:click="$data.data.add('1')">1</div>
            <div class="flex-center numCell" x-on:click="$data.data.add('2')">2</div>
            <div class="flex-center numCell" x-on:click="$data.data.add('3')">3</div>
            <div class="flex-center numCellEquals" x-on:click="$data.data.update()">=</div>
            <div class="flex-center numCell" x-on:click="$data.data.add('00')">00</div>
            <div class="flex-center numCell" x-on:click="$data.data.add('0')">0</div>
            <div class="flex-center numCell" x-on:click="$data.data.add('.')">.</div>
        </div>
    </section>

    <div id="markdown"></div>
    <div class="px-5">
        <div x-show="showInfos" x-transition x-transition.duration.500ms
            class="fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 backdrop-blur-sm dark:bg-gray-950 dark:bg-opacity-50"
            x-on:click="showInfos = false" style="display: none">
            <div class="max-w-sm rounded-md bg-gray-200 p-4 dark:bg-gray-800" x-on:click.stop="">
                <h3 class="mb-4 flex">
                    <svg class="mr-2 inline-block w-6" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                    </svg>
                    <span>Infos</span>
                </h3>
                <p>
                    Taux:
                    <span x-text="data.rate" class="font-bold"></span>
                </p>
                <p>
                    Derni√®re mise √† jour du taux :
                    <span x-text="data.rate_updated_at" class="font-bold"></span>
                </p>
                <div class="flex items-center justify-between gap-2 py-3">
                    <span class="inline-block h-5">Theme sombre: </span>
                    <button class="relative -mb-2 inline-block h-6 w-10 rounded-full"
                        x-bind:class="$data.data.darkMode? 'bg-orange-600' : 'bg-gray-500'" type="button"
                        x-on:click="$data.data.toogleTheme()" title="changer de theme">
                        <span class="absolute top-1/2 h-4 w-4 -translate-y-1/2 rounded-full bg-gray-300"
                            :style="$data.data.darkMode ? 'right: .25rem;' : 'left: .25rem'"></span>
                    </button>
                </div>
                <hr class="my-2 border border-gray-300" />
                <template x-if="maj_disponible">
                    <div class="my-3 rounded-md bg-green-800 bg-opacity-90 p-3 dark:bg-green-500 dark:bg-opacity-40">
                        <h4 class="text-lg text-white">
                            Nouvelle mise √† jour disponible<br />Version
                            <span class="font-bold" x-text="$data.getSettings().app_update.current_version"></span>
                        </h4>
                        <p class="mt-3 text-sm text-gray-300 dark:text-gray-200">
                            Mettez votre application √† jour pour profiter
                            des derni√®res fonctionnalit√©s et corrections de
                            bugs
                        </p>
                        <div x-on:click="openExternalLink(homePage_url)"
                            class="mt-3 inline-block w-full cursor-pointer py-2">
                            <div
                                class="mx-auto flex max-w-max items-center justify-center gap-1 rounded-md bg-orange-600 px-4 py-2 text-gray-100">
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="2" stroke="currentColor" class="h-6 w-6 animate-pulse">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
                                    </svg>
                                </span>
                                <span>T√©l√©charger Maintenant</span>
                            </div>
                        </div>
                    </div>
                </template>
                <p class="text-sm">
                    D√©velopp√© par
                    <span class="cursor-pointer font-bold text-orange-500 underline" title="My Facebook Account"
                        x-on:click="openExternalLink('http:/'+'/facebook.com/@cissokocisse')">
                        Ibrahim Aboubacar Ibrahim
                    </span>
                </p>
                <p class="mt-4 text-center text-xs text-gray-500">
                    Le Ciskolateur, version
                    <span x-text="$data.data.appInfos.version + ' released ' + $data.data.appInfos.release_date"></span>
                    <span x-text="' / ' + $data.data.appInfos.uuid"></span>
                </p>
            </div>
        </div>
    </div>
    <!-- </div> -->
    <div x-show="showRate" x-transition x-transition.duration.500ms
        class="fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 backdrop-blur-sm dark:bg-gray-950 dark:bg-opacity-50"
        x-on:click="showRate = false; showCommands = false;" style="display: none">
        <div class="max-w-md rounded-md bg-gray-200 p-4 dark:bg-gray-800" x-on:click.stop="">
            <h3 class="mb-4_ flex">
                <svg class="mr-2 inline-block w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                    stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M14.25 7.756a4.5 4.5 0 100 8.488M7.5 10.5h5.25m-5.25 3h5.25M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span
                    x-text="$data.data.rate == $data.getSettings().rate.value ? 'Taux actuel' : 'Taux personnalis√©'"></span>
                <div class="relative ml-auto flex">
                    <svg x-on:click="gobalInit" :class="$data.chargement ? 'animate-spin' : ''"
                        class="ml-auto mr-2 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                        stroke-width="1.5" stroke="currentColor" class="h-6 w-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                        <div x-show="$data.chargementRefresh" x-transition x-transition.duration.500ms
                            class="absolute -right-4 top-full mt-3 inline-block min-w-max bg-green-500 px-2 py-1 text-xs text-white"
                            style="display: none">
                            <span class="bg-green-500_ h-2_ w-3_ absolute bottom-full right-7 z-20 inline-block" style="
                                        border-right: 6px solid transparent;
                                        border-bottom: 6px solid
                                            rgb(
                                                34 197 94 / var(--tw-bg-opacity)
                                            );
                                        border-left: 6px solid transparent;
                                    "></span>
                            Mise √† jour effectu√©e :)
                        </div>
                    </svg>
                </div>
                <div class="ml-2 inline-block">
                    <a :href="'whatsapp:'+'/'+'/'+'send?text='+messageInvitation" target="_blank"
                        rel="noopener noreferrer">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="h-6 w-6">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z" />
                        </svg>
                    </a>
                    <!-- </svg> -->
                </div>
            </h3>
            <div class="gap-6_ flex items-center justify-center py-5 font-bold">
                <span class="-ml-16_ inline-block" x-text="data.rate" style="font-size: 7rem; line-height: 7rem">
                </span>
                <div class="inline-block h-full transition-all"
                    :class="showCommands ? 'w-16 opacity-1' : 'w-0 opacity-0'">
                    <span class="flex h-full flex-col items-center justify-center gap-3">
                        <div class="rounded-full bg-gray-500 p-2 text-gray-200"
                            x-on:click.stop="showCommands ? data.incrementRate() : 1+1">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="5"
                                stroke="currentColor" class="h-w-7 w-7">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
                            </svg>
                        </div>
                        <div class="rounded-full bg-gray-500 p-2 text-gray-200"
                            x-on:click.stop="showCommands ? data.decrementRate() : 1+1">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="5"
                                stroke="currentColor" class="h-w-7 flex w-7 items-center justify-center">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                            </svg>
                        </div>
                    </span>
                </div>
            </div>
            <p class="-mt-3 mb-1 text-center text-gray-500 transition-opacity"
                :class="$data.data.rate == $data.getSettings().rate.value ? 'opacity-1' : 'opacity-0'">
                <span class="font-bold">10'000</span> Fr CFA =
                <span x-text="$data.getSettings().rate.value + ($data.data.rate - $data.data.rate)"
                    class="font-bold"></span> GHS
            </p>
            <p class="text-center text-xs text-gray-500 transition-opacity"
                :class="$data.data.rate == $data.getSettings().rate.value ? 'opacity-1' : 'opacity-0'">
                Mis √† jour :
                <span x-text="data.rate_updated_at" class="font-bold"></span>
            </p>
            <hr class="mb-5 mt-2 border border-b-0 border-gray-500" />
            <div class="mt-4_ flex items-center justify-center gap-4">
                <template x-if="!showCommands">
                    <div title="Chosir mon taux" x-on:click="showCommands = true"
                        class="flex items-center justify-center rounded-xl border-2 border-gray-800 bg-gray-500 px-3 py-2 text-gray-200 dark:border-gray-200 dark:bg-transparent">
                        Choisir mon taux
                    </div>
                </template>
                <template x-if="showCommands">
                    <div title="Chosir mon taux" x-on:click="reinitialiserTaux"
                        class="flex items-center justify-center rounded-xl border-2 border-gray-800 bg-gray-500 px-3 py-2 text-gray-200 dark:border-gray-200 dark:bg-transparent">
                        Reinitialier le taux
                    </div>
                </template>
                <div title="Continer avec le taux actuel"
                    class="flex items-center justify-center rounded-xl border-2 border-green-800 bg-green-700 px-3 py-2 text-gray-200"
                    x-text="'Continer avec '+data.rate" x-on:click="showRate = false; showCommands = false">
                    <!-- </button> -->
                </div>
            </div>
        </div>
    </div>

</body>

</html>
